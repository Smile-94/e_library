{% extends 'authority_base.html' %}
{% load static %}

{% block title %}
  {{ title }}
{% endblock %}

{% block body %}
  <div class="bg-light rounded h-100 p-4">
    <h6 class="mb-4">{{ form_title }}</h6>

    <table class="table table-striped table-hover">
      <thead class="bg-dark text-white">
        <tr>
          <th>Sl</th>
          <th>Title</th>
          <th>Discount Amount (%)</th>
          <th>Priority</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        {% if object %}
          <tr>
            <td>1</td>

            <td>{{ object.promotion_title|default:'—' }}</td>

            <td>{{ object.discount_amount }}</td>

            <td>{{ object.priority }}</td>

            <td>{{ object.start_date|date:'Y-m-d H:i' }}</td>

            <td>
              {% if object.end_date %}
                {{ object.end_date|date:'Y-m-d H:i' }}
              {% else %}
                —
              {% endif %}
            </td>

            <td>
              {% if object.active_status == 'ACTIVE' %}
                <span class="badge bg-success">Active</span>
              {% else %}
                <span class="badge bg-secondary">Inactive</span>
              {% endif %}
            </td>

            <td>
              <form method="post">
                {% csrf_token %}

                <a href="{% url 'authority:discount_list' %}" class="btn btn-success btn-sm"><i class="fa-solid fa-arrow-left me-1"></i> Back</a>

                <button type="submit" class="btn btn-danger btn-sm" id="deleteTask"><i class="fa-solid fa-trash me-1"></i> Delete</button>
              </form>
            </td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const deleteBtn = document.getElementById('deleteTask')
    
      deleteBtn.addEventListener('click', function (event) {
        if (!confirm('Are you sure you want to delete this promotional discount?')) {
          event.preventDefault()
        }
      })
    })
  </script>
{% endblock %}
